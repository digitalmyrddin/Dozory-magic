<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ú–∞–≥–∏–∏ –°—Ç–∏—Ö–∏–π | –î–æ–∑–æ—Ä—ã</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: #1e1e2f;
            color: #fff;
            padding: 20px;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .calculator {
            max-width: 500px;
            width: 100%;
            background: #2c2c44;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
        }
        h2 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            color: #d2c4ff;
            font-size: 26px;
        }
        label {
            display: block;
            margin-top: 18px;
            font-weight: 600;
            color: #cfc7ff;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 12px;
            background: #3a3a5a;
            padding: 10px 14px;
            border-radius: 12px;
            border: 1px solid #5a5a8a;
            cursor: pointer;
        }
        .checkbox-label input {
            width: 18px;
            height: 18px;
            margin: 0;
            accent-color: #6c5ce7;
        }
        select, input[type=number] {
            width: 100%;
            padding: 10px 14px;
            margin-top: 6px;
            border-radius: 12px;
            border: none;
            background: #3a3a5c;
            color: #fff;
            font-size: 16px;
            border: 1px solid #5a5a8a;
        }
        input:disabled {
            opacity: 0.6;
            background: #2a2a44;
            cursor: not-allowed;
        }
        .ap-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        .ap-btn {
            flex: 1 0 45px;
            background: #3a3a5c;
            border: 2px solid #5a5a8a;
            color: #ddd;
            padding: 12px 0;
            border-radius: 14px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.15s;
            box-shadow: 0 2px 0 #1e1e2f;
        }
        .ap-btn.active {
            background: linear-gradient(145deg, #7b6cd4, #5a4bcf);
            border-color: #ffd966;
            color: white;
            box-shadow: 0 0 12px rgba(255, 220, 100, 0.6);
        }
        .radio-group {
            display: flex;
            gap: 25px;
            margin-top: 10px;
            background: #3a3a5a;
            padding: 12px 16px;
            border-radius: 16px;
        }
        .radio-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            margin: 0;
            font-weight: normal;
            color: #e0e0ff;
            cursor: pointer;
        }
        /* –°–í–ï–ß–ï–ù–ò–ï –î–õ–Ø –≠–ù–ï–†–ì–ò–ò */
        .energy-glow {
            margin-top: 20px;
            font-size: 22px;
            text-align: center;
            font-weight: bold;
            background: #23233a;
            padding: 16px;
            border-radius: 16px;
            border-left: 6px solid #6c5ce7;
            word-break: break-word;
            box-shadow: 0 0 20px #6c5ce7, 0 0 40px rgba(108, 92, 231, 0.4);
            text-shadow: 0 0 8px #a29bfe;
            transition: box-shadow 0.2s;
        }
        .damage-panel {
            background: #1e1e2f;
            border-radius: 20px;
            padding: 20px;
            margin: 25px 0 15px;
            text-align: center;
            border: 2px solid #5a4bcf;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .damage-value {
            font-size: 36px;
            font-weight: 800;
            color: #a5ff9a;
            line-height: 1.2;
            text-shadow: 0 0 8px #00aa88;
        }
        .damage-desc {
            font-size: 15px;
            color: #b8b8ff;
            margin-top: 6px;
        }
        /* –°–¢–ò–õ–¨ –î–õ–Ø –ö–†–ò–¢–ò–ß–ï–°–ö–û–ì–û –£–†–û–ù–ê */
        .crit-value {
            font-size: 18px;
            font-weight: bold;
            color: #ffcc80;
            margin-top: 8px;
            text-shadow: 0 0 6px #ff9900;
            letter-spacing: 1px;
        }
        .breakdown {
            font-size: 14px;
            color: #aaaad0;
            text-align: center;
            margin-top: 8px;
            background: #2a2a42;
            padding: 8px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h2>‚ú® –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –ú–ê–ì–ò–ò ‚ú®</h2>
        
        <!-- –û–ß–ö–ò –î–ï–ô–°–¢–í–ò–Ø ‚Äî –ö–ù–û–ü–ö–ò -->
        <label>‚ö° –û—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è (–û–î):</label>
        <div class="ap-buttons" id="apButtons"></div>

        <!-- –ß–ï–ö–ë–û–ö–° –£–¢–†–£–ñ–î–Å–ù -->
        <label class="checkbox-label">
            <input type="checkbox" id="tired"> 
            <span style="font-size: 1.1rem;">üòì ¬´–£—Ç—Ä—É–∂–¥—ë–Ω¬ª</span>
        </label>

        <!-- –°–õ–û–ô -->
        <label>üåÄ –°–ª–æ–π:</label>
        <select id="layer">
            <option value="0">–†–µ–∞–ª—å–Ω–æ—Å—Ç—å</option>
            <option value="1">1 —Å–ª–æ–π</option>
            <option value="1.2">2 —Å–ª–æ–π</option>
            <option value="1.4">3 —Å–ª–æ–π</option>
            <option value="1.7">4 —Å–ª–æ–π</option>
            <option value="2">5 —Å–ª–æ–π</option>
        </select>

        <!-- –¢–ò–ü –ê–¢–ê–ö–ò -->
        <label>‚öîÔ∏è –¢–∏–ø –∞—Ç–∞–∫–∏:</label>
        <div class="radio-group" id="attackTypeGroup">
            <label>
                <input type="radio" name="attackType" value="single" checked> üéØ –û–¥–∏–Ω
            </label>
            <label>
                <input type="radio" name="attackType" value="group"> üë• –ì—Ä—É–ø–ø–∞
            </label>
        </div>

        <!-- –ö–û–õ–ò–ß–ï–°–¢–í–û –¶–ï–õ–ï–ô -->
        <label>üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–ª–µ–π (–≤—Ä–∞–≥–æ–≤):</label>
        <input type="number" id="targets" min="1" value="1" step="1" disabled>

        <!-- –≠–ù–ï–†–ì–ò–Ø ‚Äî –°–í–ï–†–•–£ –°–û –°–í–ï–ß–ï–ù–ò–ï–ú -->
        <div id="energyResult" class="energy-glow">‚ö° –≠–Ω–µ—Ä–≥–∏—è: 10</div>
        <div id="energyBreakdown" class="breakdown">1 –û–î √ó10</div>

        <!-- –ü–ê–ù–ï–õ–¨ –£–†–û–ù–ê ‚Äî –° –ö–†–ò–¢–û–ú -->
        <div class="damage-panel">
            <div id="damageMain" class="damage-value">20</div>
            <div id="damageDetail" class="damage-desc">üéØ –£—Ä–æ–Ω –ø–æ –æ–¥–Ω–æ–π —Ü–µ–ª–∏</div>
            <div id="critValue" class="crit-value">üí• –ö—Ä–∏—Ç: 40</div>
        </div>
    </div>

    <script>
        // --- –¢–ê–ë–õ–ò–¶–´ –£–†–û–ù–ê (–û–î ‚Üí —É—Ä–æ–Ω) ---
        const SINGLE_DMG = {1:20, 2:55, 3:90, 4:125, 5:175, 6:240};
        const GROUP_DMG  = {1:20, 2:55, 3:90, 4:125, 5:155, 6:175};

        // --- –¢–ï–ö–£–©–ï–ï –ó–ù–ê–ß–ï–ù–ò–ï –û–î ---
        let currentAP = 1;

        // --- –≠–õ–ï–ú–ï–ù–¢–´ ---
        const apButtonsDiv = document.getElementById('apButtons');
        const tiredCheck = document.getElementById('tired');
        const layerSelect = document.getElementById('layer');
        const targetsInput = document.getElementById('targets');
        const attackRadios = document.getElementsByName('attackType');
        const damageMain = document.getElementById('damageMain');
        const damageDetail = document.getElementById('damageDetail');
        const critValue = document.getElementById('critValue');
        const energyResult = document.getElementById('energyResult');
        const energyBreakdown = document.getElementById('energyBreakdown');

        // --- –°–û–ó–î–ê–ù–ò–ï –ö–ù–û–ü–û–ö –û–î ---
        function createAPButtons() {
            for (let i = 1; i <= 6; i++) {
                const btn = document.createElement('button');
                btn.className = 'ap-btn' + (i === 1 ? ' active' : '');
                btn.textContent = i;
                btn.dataset.ap = i;
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.ap-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentAP = i;
                    updateAll();
                });
                apButtonsDiv.appendChild(btn);
            }
        }

        function getCurrentAP() {
            return currentAP;
        }

        function isGroupSelected() {
            for (let radio of attackRadios) {
                if (radio.checked) return radio.value === 'group';
            }
            return false;
        }

        function toggleTargetsField() {
            const group = isGroupSelected();
            targetsInput.disabled = !group;
            if (group) {
                targetsInput.min = 2;
                if (parseInt(targetsInput.value) < 2) {
                    targetsInput.value = 2;
                }
            } else {
                targetsInput.min = 1;
                targetsInput.value = 1;
            }
        }

        function getTargets() {
            if (!isGroupSelected()) return 1;
            let t = parseInt(targetsInput.value);
            if (isNaN(t) || t < 2) t = 2;
            return t;
        }

        function updateDamage() {
            const ap = getCurrentAP();
            const targets = getTargets();
            const group = isGroupSelected();

            let dmg, desc;
            if (!group) {
                dmg = SINGLE_DMG[ap] || 0;
                desc = 'üéØ –£—Ä–æ–Ω –ø–æ –æ–¥–Ω–æ–π —Ü–µ–ª–∏';
            } else {
                dmg = GROUP_DMG[ap] || 0;
                desc = `üë• –£—Ä–æ–Ω –ø–æ –∫–∞–∂–¥–æ–π —Ü–µ–ª–∏`;
            }
            damageMain.innerText = dmg;
            damageDetail.innerText = desc;
            // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω = –æ–±—ã—á–Ω—ã–π √ó 2
            critValue.innerText = `üí• –ö—Ä–∏—Ç: ${dmg * 2}`;
        }

        function updateEnergy() {
            let ap = getCurrentAP();
            let tired = tiredCheck.checked;
            let layer = parseFloat(layerSelect.value);
            if (isNaN(layer)) layer = 0;
            let targets = getTargets();

            let energy = ap * 10;
            if (tired) energy *= 2;
            if (layer !== 0) energy = Math.floor(energy * layer);
            energy *= targets;

            energyResult.innerHTML = `‚ö° –≠–Ω–µ—Ä–≥–∏—è: ${energy}`;

            let breakdown = `${ap} –û–î √ó10`;
            if (tired) breakdown += ' √ó2 (—É—Ç—Ä—É–∂–¥—ë–Ω)';
            if (layer !== 0) breakdown += ` √ó${layer} (—Å–ª–æ–π)`;
            if (targets > 1) breakdown += ` √ó${targets} (—Ü–µ–ª–∏)`;
            energyBreakdown.innerText = breakdown;
        }

        function updateAll() {
            toggleTargetsField();
            updateDamage();
            updateEnergy();
        }

        // --- –ü–û–î–ü–ò–°–ö–ê –ù–ê –°–û–ë–´–¢–ò–Ø ---
        tiredCheck.addEventListener('change', updateAll);
        layerSelect.addEventListener('change', updateAll);
        targetsInput.addEventListener('input', updateAll);
        for (let radio of attackRadios) {
            radio.addEventListener('change', updateAll);
        }

        // --- –°–¢–ê–†–¢ ---
        createAPButtons();
        updateAll();
    </script>
</body>
</html>